<!doctype html>

<html lang="en">
    <head>
        <title>Images and Buffers</title>
        <link href="/labs/labs.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div class="skip-link">
            <a href="#main">Skip to content</a>
        </div>
        <header>
            This tutorial is part of the <a href="/labs">skills labs</a> within
            <a href="/mooc">Interactive Data Science and Visualization</a>.
        </header>
        <main id="main">
            <h1>Images and Buffers</h1>

            While loading external images likely won't be a common tactic for
            visualizations in this course, I still want to briefly explore how
            to use them. We will also mention buffers which are a kind of image
            that you build from within your sketch which can help "copy and
            paste" a part of your drawing in repetition. These can sometimes
            provide a performance boost if you have a complex graphic! Finally,
            we will look at how we can save images from our sketches.

            <details>
                <summary>Contents</summary>
                <ul>
                    <li><a href="#load-images">Load Images</a></li>
                    <li><a href="#transparency">Transparency</a></li>
                    <li><a href="#buffers">Buffers</a></li>
                    <li><a href="#save-images">Save Images</a></li>
                    <li><a href="#next">Next</a></li>
                </ul>
            </details>

            <section id="load-images">
                <h2>Load Images</h2>

                Let's load a simple image and draw it. Go ahead and add
                <a href="/labs/reading.png" target="_blank">reading.png</a> to
                your sketchbook. Then, add the following code:

                <pre>
import sketchingpy

sketch = sketchingpy.Sketch2DWeb(500, 500)
sketch.clear('#707070')

image = sketch.get_image('reading.png')
image.resize(150, 150)
sketch.set_image_mode('corner')
sketch.draw_image(250, 250, image)

sketch.show()</pre
                >

                After giving this a run, try changing the resize dimensions.
                Finally, try changing the mode specified in set_image_mode.
                There are two options: center and corner.
            </section>

            <section id="transparency">
                <h2>Transparency</h2>

                Some file formats like png can support transparency. Others
                always have a filled background. To demonstrate how transparency
                works, try this interactive sketch.

                <pre>
import sketchingpy

sketch = sketchingpy.Sketch2DWeb(500, 500)

image = sketch.get_image('reading.png')
image.resize(150, 150)

def draw(sketch):
    sketch.clear('#707070')

    mouse = sketch.get_mouse()

    sketch.clear_stroke()
    sketch.set_ellipse_mode('radius')
    sketch.set_fill('#A6CEE350')
    sketch.draw_ellipse(250, 250, 100, 100)

    sketch.set_image_mode('center')
    sketch.draw_image(mouse.get_pointer_x(), mouse.get_pointer_y(), image)

sketch.on_step(draw)

sketch.show()</pre
                >

                Try changing reading.png to
                <a href="/labs/reading.jpg" target="_blank">reading.jpg</a>
                instead. While PNG has a transparency layer, JPEG doesn't
                support transparency.
            </section>

            <section id="buffers">
                <h2>Buffers</h2>

                <p>
                    We won't go too far into buffers but, if you have an
                    "expensive" part of your graphic to draw, it might make
                    sense to save a copy of your work instead of having it
                    recreated from scrach on each step. Buffers are like images
                    that aren't saved to files but, instead, are held on to by
                    the computer in memory for quick re-drawing. For more
                    details, see the
                    <a
                        href="https://sketchingpy.org/examples/web/example.html?sketch=buffer_simple"
                        target="_blank"
                        >buffers example</a
                    >.
                </p>

                <p>
                    All that said, to motivate why you might take this approach,
                    imagine your are drawing the user's location on a map. Let's
                    say that the map is made up of thousands of points and
                    lines. It can be expensive to draw that each time by calling
                    draw_line. Instead, you might save the results of your work
                    after drawing it once, writing to one of these in-memory
                    images and just drawing glyphs on top of that map like, for
                    example, to indicate where the user currently within that
                    space.
                </p>
            </section>

            <section id="save-images">
                <h2>Save Images</h2>

                All this in mind, perhaps most important for us is saving from
                our sketches. Let's make a simple image file with an ellipse.

                <pre>
import sketchingpy

sketch = sketchingpy.Sketch2D(500, 500)
sketch.draw_ellipse(250, 250, 100, 100)
sketch.save_image('ellipse.png')
sketch.show()
</pre
                >

                By default, this will have a transparent background (for most
                platforms). Note that, if you don't want a transparent
                background, you can specify a background color by calling
                <a
                    href="https://sketchingpy.org/reference/clear.html"
                    target="_blank"
                    >clear</a
                >.
            </section>

            <section id="next">
                <h2>Next</h2>
                I think we have everything we need to make drawings. Let's next
                take a brief look at interactivity. Continue on to
                <a href="/labs/resources_loops.html">Tutorial 10</a> to learn
                about user loops.

                <details>
                    <summary>Citations</summary>
                    <ul>
                        <li>
                            A. Pottinger, "Sketchingpy." Sketchingpy Project,
                            2024. [Online]. Available:
                            <a href="https://sketchingpy.org/" target="_blank"
                                >https://sketchingpy.org/</a
                            >
                        </li>
                    </ul>
                </details>
            </section>
        </main>
        <footer>
            Materials on this page are available under
            <a href="https://opensource.org/license/bsd-3-clause"
                >BSD 3-Clause License</a
            >
            for code and
            <a href="https://creativecommons.org/licenses/by/4.0/"
                >CC-BY License</a
            >
            for all other material. Thank you to
            <a href="https://public-sans.digital.gov">PublicSans</a> under the
            Open Font License. No cookies are used. Analytics limited to
            standard server logging which may collect IP addresses. These logs
            are deleted or anonymized within 30 days.
        </footer>
    </body>
</html>
